<div class="animated fadeIn">
    <div class="card">
        <div class="card-header">
            <div class="row">
                <div class="col">
                    Administraci√≥n de Usuarios
                </div>
                <div class="col text-right">
                    <button class="btn btn-primary btn-sm" (click)="handleAdd()">
                      <i class="fa fa-user-plus"></i> Agregar
                    </button>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive-sm">
                <table class="table table-bordered table-hover table-sm" style="font-size: 14px">
                    <thead>
                        <tr>
                            <th class="text-center" scope="col">#</th>
                            <th scope="col">Nombres</th>
                            <th scope="col">Apellidos</th>
                            <th scope="col">Email</th>
                            <th class="text-center" scope="col">Usuario</th>
                            <th class="text-center" scope="col">Rol</th>
                            <th class="text-center" scope="col">Operaciones</th>
                            <!-- <th class="text-center" scope="col">Usuario Modifica</th>
                            <th class="text-center" scope="col">Fecha Modifica</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of gridData; let i = index" class="clickable-row">
                            <td class="text-center" scope="row">{{(i+1)}}</td>
                            <td>{{ item.strNombre }}</td>
                            <td>{{ item.strApellidos }}</td>
                            <td>{{ item.strEmail }}</td>
                            <td class="text-center">{{ item.strUsuario }}</td>
                            <td class="text-center">{{ item.rol.strDescripcion }}</td>
                            <td class="text-center">
                                <button style="padding: 0px 4px;margin-right: 2px" class="btn btn-outline-success" (click)="handleEdit(item)">
                                    <i class="fa fa-edit"></i>
                                </button>
                                <button style="padding: 0px 6px" class="btn btn-outline-danger" (click)="handleDelete(item)"><i class="fa fa-trash-alt"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- AGREGAR USUARIO -->
<p-dialog [(visible)]="displayAddUser" [contentStyle]="{'max-width':'600px', 'min-width': '450px'}" modal="true">
    <p-header>
        Agregar Usuario
    </p-header>
    <div style="padding:5px">
        <form [formGroup]="formAdd">
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Nombre</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" formControlName="strNombre" placeholder="Nombre">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Apellidos</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" formControlName="strApellidos" placeholder="Apellidos">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Email</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control form-control-sm" formControlName="strEmail" placeholder="Correo electronico">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Usuario</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" formControlName="strUsuario" placeholder="Usuario">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Password</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control form-control-sm" formControlName="strPassword" placeholder="Password">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Rol</label>
                <div class="col-sm-10">
                    <select class="form-control form-control-sm" formControlName="rol">
                        <option [value]="item._id" *ngFor="let item of dataRoles;"> {{ item.strDescripcion }}</option>
                    </select>
                </div>
            </div>
        </form>
    </div>
    <p-footer>
        <button type="button" class="btn btn-secondary btn-sm" (click)="displayAddUser=false">Cancelar</button>
        <button type="button" [disabled]="!formAdd.valid" class="btn btn-primary btn-sm" (click)="addUsuario()"><i class="fa fa-save"></i> Guardar</button>
    </p-footer>
</p-dialog>

<!-- EDITAR USUARIO -->
<p-dialog [(visible)]="displayEditUser" [contentStyle]="{'max-width':'600px', 'min-width': '450px'}" modal="true">
    <p-header>
        Editar Usuario
    </p-header>
    <div style="padding:5px">
        <form [formGroup]="formEdit">
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Nombre</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" formControlName="strNombre" placeholder="Nombre">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Apellidos</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" formControlName="strApellidos" placeholder="Apellidos">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Email</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control form-control-sm" formControlName="strEmail" placeholder="Correo electronico">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Usuario</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" formControlName="strUsuario" placeholder="Usuario">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Password</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control form-control-sm" formControlName="strPassword" placeholder="Password">
                </div>
            </div>
            <div class="form-group row">
                <label for="" class="col-sm-2 col-form-label col-form-label-sm">Rol</label>
                <div class="col-sm-10">
                    <select class="form-control form-control-sm" formControlName="rol">
                        <option [value]="item._id" *ngFor="let item of dataRoles;"> {{ item.strDescripcion }}</option>
                    </select>
                </div>
            </div>
        </form>
    </div>
    <p-footer>
        <button type="button" class="btn btn-secondary btn-sm" (click)="displayEditUser = false">Cancelar</button>
        <button type="button" [disabled]="!formEdit.valid" class="btn btn-primary btn-sm" (click)="editUsuario()"><i class="fa fa-save"></i> Guardar</button>
    </p-footer>
</p-dialog>